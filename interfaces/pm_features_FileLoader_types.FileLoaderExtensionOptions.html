<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>FileLoaderExtensionOptions | @witchcraft/editor</title><meta name="description" content="Documentation for @witchcraft/editor"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">@witchcraft/editor</a><div id="tsd-toolbar-links"><a href="https://github.com/witchcraftjs/editor">Github</a><a href="https://github.com/witchcraftjs/editor/issues">Issues</a><a href="http://npmjs.com/@witchcraft/editor">npm</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="../modules/pm_features_FileLoader_types.html">pm/features/FileLoader/types</a></li><li><a href="" aria-current="page">FileLoaderExtensionOptions</a></li></ul><h1>Interface FileLoaderExtensionOptions</h1></div><div class="tsd-signature"><span class="tsd-signature-keyword">interface</span> <span class="tsd-kind-interface">FileLoaderExtensionOptions</span> <span class="tsd-signature-symbol">{</span><br/>    <a class="tsd-kind-property" href="#cleanuponload">cleanupOnLoad</a><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">;</span><br/>    <a class="tsd-kind-property" href="#embeddedblockcommandredirect">embeddedBlockCommandRedirect</a><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><br/>        <span class="tsd-kind-parameter">commandName</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span><br/>        <span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">,</span><br/>        <span class="tsd-kind-parameter">context</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">{</span><br/>            <span class="tsd-kind-property">dispatch</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Dispatch</span><span class="tsd-signature-symbol">;</span><br/>            <span class="tsd-kind-property">editor</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Editor</span><span class="tsd-signature-symbol">;</span><br/>            <span class="tsd-kind-property">embedId</span><span class="tsd-signature-symbol">:</span> <a href="../types/pm_features_DocumentApi_types.MaybeEmbedId.html" class="tsd-signature-type tsd-kind-type-alias">MaybeEmbedId</a><span class="tsd-signature-symbol">;</span><br/>            <span class="tsd-kind-property">nodePos</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol">;</span><br/>            <span class="tsd-kind-property">rootEditor</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Editor</span><span class="tsd-signature-symbol">;</span><br/>        <span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <span class="tsd-signature-type">boolean</span><br/>    <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol">;</span><br/>    <a class="tsd-kind-property" href="#handler">handler</a><span class="tsd-signature-symbol">:</span> <a href="../types/pm_features_FileLoader_types.IFileLoaderHandler.html" class="tsd-signature-type tsd-kind-type-alias">IFileLoaderHandler</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">File</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">;</span><br/>    <a class="tsd-kind-property" href="#htmlattributes">HTMLAttributes</a><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">;</span><br/><span class="tsd-signature-symbol">}</span></div><section class="tsd-panel tsd-hierarchy" data-refl="983"><h4>Hierarchy (<a href="../hierarchy.html#pm/features/FileLoader/types.FileLoaderExtensionOptions">View Summary</a>)</h4><ul class="tsd-hierarchy"><li class="tsd-hierarchy-item"><a href="../types/types.HTMLAttributesOptions.html" class="tsd-signature-type tsd-kind-type-alias">HTMLAttributesOptions</a></li><li class="tsd-hierarchy-item"><a href="../types/pm_features_EmbeddedDocument_types.WithOnTriggerByEmbeddedBlockOptions.html" class="tsd-signature-type tsd-kind-type-alias">WithOnTriggerByEmbeddedBlockOptions</a><ul class="tsd-hierarchy"><li class="tsd-hierarchy-item"><span class="tsd-hierarchy-target">FileLoaderExtensionOptions</span></li></ul></li></ul></section><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/witchcraftjs/editor/blob/4e786621a209453ae845d8ba3abb39b48270057a/src/runtime/pm/features/FileLoader/types.ts#L6">src/runtime/pm/features/FileLoader/types.ts:6</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h5 class="tsd-index-heading uppercase">Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="#cleanuponload" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>cleanup<wbr/>On<wbr/>Load?</span></a>
<a href="#embeddedblockcommandredirect" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>embedded<wbr/>Block<wbr/>Command<wbr/>Redirect?</span></a>
<a href="#handler" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>handler</span></a>
<a href="#htmlattributes" class="tsd-index-link tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>HTML<wbr/>Attributes</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Properties</h2></summary><section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="cleanuponload"><code class="tsd-tag">Optional</code><span>cleanup<wbr/>On<wbr/>Load</span><a href="#cleanuponload" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">cleanupOnLoad</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span></div><div class="tsd-comment tsd-typography"><p>By default, the plugin removes fileLoader nodes using cleanupFileLoaderNodes when the document is loaded. This can happen if the user interrupts a file load/upload/save and the document is saved with a fileLoader node.</p>
<p>We can't keep a reference to the file they wanted to load without external work, so the nodes are removed.</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/witchcraftjs/editor/blob/4e786621a209453ae845d8ba3abb39b48270057a/src/runtime/pm/features/FileLoader/types.ts#L12">src/runtime/pm/features/FileLoader/types.ts:12</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><h3 class="tsd-anchor-link" id="embeddedblockcommandredirect"><code class="tsd-tag">Optional</code><span>embedded<wbr/>Block<wbr/>Command<wbr/>Redirect</span><a href="#embeddedblockcommandredirect" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">embeddedBlockCommandRedirect</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">commandName</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">args</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">context</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">{</span><br/>        <span class="tsd-kind-property">dispatch</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Dispatch</span><span class="tsd-signature-symbol">;</span><br/>        <span class="tsd-kind-property">editor</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Editor</span><span class="tsd-signature-symbol">;</span><br/>        <span class="tsd-kind-property">embedId</span><span class="tsd-signature-symbol">:</span> <a href="../types/pm_features_DocumentApi_types.MaybeEmbedId.html" class="tsd-signature-type tsd-kind-type-alias">MaybeEmbedId</a><span class="tsd-signature-symbol">;</span><br/>        <span class="tsd-kind-property">nodePos</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">number</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol">;</span><br/>        <span class="tsd-kind-property">rootEditor</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Editor</span><span class="tsd-signature-symbol">;</span><br/>    <span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span> <span class="tsd-signature-symbol">=&gt;</span> <span class="tsd-signature-type">boolean</span><br/><span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">undefined</span></div><div class="tsd-comment tsd-typography"><p>When the editor is embedded and it's embedding a single block, certain commands are nullified and just return true and do nothing because they would break the embedding (e.g. enter, split, indent, etc).</p>
<p>All such commands forward to the <code>embeddedCommandRedirect</code> command if it's available (otherwise a warning is logged). The <code>Embedded</code> extension takes care of registering this redirect and can redirect some of the commands to the root editor, but not all of them.</p>
<p>You can use this function to handle the redirection yourself. You will get passed both editor instances (root and embedded) to facilitate communication. If you can handle the command, you should return a boolean as with a regular command. Otherwise you can return undefined to let the default handler take care of it.</p>
<p>Note that if the change moves the node, the component will get remounted and the embedded editor will no longer exist (to, for example, focus it).</p>
<p>The included EmbeddedNodeView takes care of auto-focusing when the selection matches it's position. So as a workaround for focus at least, you can use <code>tr.setNodeSelection(nodePos + offset)</code>. Note the use of <code>offset</code>. The node's position will have probably changed depending on the command so you will need to know how much to offset it or have some way to find it's position again. While the embedId is provided, it's not guaranteed there is only one node embedding that id, there might be multiple. A better way is to first find the parent embedding item id before executing your command, note the <code>blockId</code>, then use it to find the node again.</p>
<p>See redirectFromEmbedded for creating redirectable commands.</p>
</div><aside class="tsd-sources"><p>Inherited from WithOnTriggerByEmbeddedBlockOptions.embeddedBlockCommandRedirect</p><ul><li>Defined in <a href="https://github.com/witchcraftjs/editor/blob/4e786621a209453ae845d8ba3abb39b48270057a/src/runtime/pm/features/EmbeddedDocument/types.ts#L48">src/runtime/pm/features/EmbeddedDocument/types.ts:48</a></li></ul></aside></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="handler"><span>handler</span><a href="#handler" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">handler</span><span class="tsd-signature-symbol">:</span> <a href="../types/pm_features_FileLoader_types.IFileLoaderHandler.html" class="tsd-signature-type tsd-kind-type-alias">IFileLoaderHandler</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">File</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></div><div class="tsd-comment tsd-typography"><p>See <a href="../types/pm_features_FileLoader_types.IFileLoaderHandler.html" class="tsd-kind-type-alias">IFileLoaderHandler</a></p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/witchcraftjs/editor/blob/4e786621a209453ae845d8ba3abb39b48270057a/src/runtime/pm/features/FileLoader/types.ts#L14">src/runtime/pm/features/FileLoader/types.ts:14</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-inherited"><h3 class="tsd-anchor-link" id="htmlattributes"><span>HTML<wbr/>Attributes</span><a href="#htmlattributes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">HTMLAttributes</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Record</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></div><aside class="tsd-sources"><p>Inherited from HTMLAttributesOptions.HTMLAttributes</p><ul><li>Defined in <a href="https://github.com/witchcraftjs/editor/blob/4e786621a209453ae845d8ba3abb39b48270057a/src/runtime/types/index.ts#L41">src/runtime/types/index.ts:41</a></li></ul></aside></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Properties</summary><div><a href="#cleanuponload"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>cleanup<wbr/>On<wbr/>Load</span></a><a href="#embeddedblockcommandredirect" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>embedded<wbr/>Block<wbr/>Command<wbr/>Redirect</span></a><a href="#handler"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>handler</span></a><a href="#htmlattributes" class="tsd-is-inherited"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>HTML<wbr/>Attributes</span></a></div></details></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/witchcraftjs/editor" class="tsd-nav-link">Github</a><a href="https://github.com/witchcraftjs/editor/issues" class="tsd-nav-link">Issues</a><a href="http://npmjs.com/@witchcraft/editor" class="tsd-nav-link">npm</a></nav><nav class="tsd-navigation"><a href="../modules.html">@witchcraft/editor</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
