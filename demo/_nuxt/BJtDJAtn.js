import{r as f,Y as M,o as L,e as T,Z as b,j as h,ab as N,aM as v,F as O,aN as q,aO as C,ai as g,v as _,x as k,y as A,L as S,O as x,R as K,P as j,N as m,Q as B,X as R}from"./Cql2C_go.js";import{u as $}from"./Cv7Eaxfl.js";import{u as P,_ as V}from"./BtM6Idd0.js";import{i as W,m as H,d as F,a as G,b as E,c as Q,l as U,t as X}from"./Bk2TiR2_.js";import{N as Y}from"./DFlTAggL.js";import Z from"./BiEpeoKj.js";import"./Bp1xJQ5-.js";import"./DMGTKRWK.js";import"./CD0Jx8XC.js";import"./sdUFAksv.js";import"./2QWzZFR8.js";import"./DgHYUynx.js";import"./DJrPe1XC.js";function z(e,a=f(!0)){const i=f(!1),t=f(!1),s=r=>{t.value=!0,setTimeout(()=>{t.value=!1},0)},o=r=>{t.value=!1,i.value=!1},u=r=>{t.value&&a.value&&(i.value=!0)};let c=!1;const l=()=>{c&&(b(e.value),e.value&&(e.value.addEventListener("focusin",u),e.value.addEventListener("keydown",s),e.value.addEventListener("mousedown",o)))},d=()=>{e.value&&(b(e.value),e.value.removeEventListener("focusin",u),e.value.removeEventListener("keydown",s),e.value.removeEventListener("mousedown",o))};return M(a,(r,p)=>{r!==p&&(r?l():(i.value=!1,d()))}),L(()=>{c=!0,a.value&&l()}),T(()=>{c=!1,d()}),{outline:i,control:a}}const D="prefersColorSchemeDark",J=["system","dark","light"],ee=({useLocalStorage:e=!0,darkModeOrder:a=J,isClientSide:i=!0,useViewTransition:t=!0}={})=>{const s=f(!1),o=f(void 0);e&&i&&M(o,()=>{localStorage.setItem(D,o.value?"true":"false")});const u=h(()=>o.value??s.value),c=h(()=>o.value===void 0?"system":o.value?"dark":"light");function l(n){o.value=n==="dark"?!0:n==="light"?!1:void 0}function d(){const n=a.indexOf(c.value);return n===2?a[0]:a[n+1]}function r(){l(d())}function p(){if(!t){r();return}const n=d(),y=a.indexOf(c.value),I=s.value?"dark":"light";if(n==="system"&&I===a[y]){r();return}document.startViewTransition||r(),document.startViewTransition(async()=>{r(),await N()})}return L(()=>{if(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:n})=>{n?s.value=!0:s.value=!1}),e!==!1){const n=typeof e=="string"?e:D,y=localStorage.getItem(n);y==="true"?o.value=!0:y==="false"&&(o.value=!1)}}),v(W,u),v(H,o),v(F,{darkMode:u,darkModeState:c,manualDarkMode:o,systemDarkMode:s}),v(G,{setDarkMode:l,cycleDarkMode:p}),{darkMode:u,darkModeState:c,setDarkMode:l,cycleDarkMode:p,manualDarkMode:o,systemDarkMode:s}};function te(...e){return ee(...e)}function ae(e,a){const i=O(E);if(i===void 0)throw new Error("witchcraft/ui: The default translation function requires the useSetupI18n `useBuiltinTranslations` options to be true. Did you set it?");let t=i.value["witchcraft-ui"][e];if(t===void 0)throw new Error(`No translation for key ${e}.`);if(a!==void 0)for(const[s,o]of Object.entries(a))t=t.replaceAll(`{${s}}`,o);return t}const se=Object.assign({"../assets/locales/en.json":()=>q(()=>import("./smYWnEM1.js"),[],import.meta.url)}),w={},ne=new Proxy({},{get(){return"..."}}),oe=new Proxy({},{get(e,a){if(a==="witchcraft-ui")return ne}});async function ie({locale:e,useBuiltinTranslations:a=!1,useDummyMessageSetWhileLoading:i=!0,translationFunction:t=ae}){if(v(Q,t),a){const s=f(i?oe:{});v(E,s);async function o(u){if(w[u])s.value=w[u];else{const l=(await se[`../assets/locales/${u}.json`]()).default;w[u]=l,s.value=l}}o(e.value),M(e,async()=>{o(e.value)})}}function ue(){const e=f("en"),a=f("en-GB");function i(s){e.value=s}function t(s){a.value=s}return v(U,e),v(X,a),{languageLocale:e,timeLocale:a,setLanguageLocale:i,setTimeLocale:t}}const le=C,re=["id"],be=Object.assign({name:"Root",inheritAttrs:!1,suspensible:!1},{__name:"WRoot",props:{theme:{type:Object,required:!1,default:void 0},outline:{type:Boolean,required:!1,default:!0},forceOutline:{type:Boolean,required:!1,default:!1},testWrapperMode:{type:Boolean,required:!1,default:!1},id:{type:String,required:!1,default:"app"},getRef:{type:Function,required:!1,default:void 0},isClientSide:{type:Boolean,required:!1,default:!0},useBuiltinTranslations:{type:Boolean,required:!1,default:!0},useNotifications:{type:Boolean,required:!1,default:!0},notificationHandler:{type:Object,required:!1,default:void 0}},setup(e,{expose:a}){const i=$(["wrapper"]),t=e,s=f(null);function o(n){n!==null&&!(n instanceof HTMLElement)&&R(),s.value=n,t.getRef?.(n)}if(t.useNotifications){const n=t.notificationHandler??new Y;P(n,t.isClientSide)}const u=z(s).outline,c=h(()=>t.outline&&u.value||t.forceOutline),l=h(()=>t.theme??le),d=()=>{g(l.value).attach(s.value)};t.isClientSide&&(L(()=>{g(l.value).on("change",d),d()}),T(()=>{g(l.value).off("change",d)}));const r=te({isClientSide:t.isClientSide}),p=r.darkMode;if(a({darkMode:r}),t.useBuiltinTranslations){const{languageLocale:n}=ue();ie({locale:n,useBuiltinTranslations:!0,useDummyMessageSetWhileLoading:!0})}return(n,y)=>(k(),_("div",j({id:e.id,tabindex:"-1",class:m(B)(c.value?"group outlined outlined-visible":"[&_*]:outline-hidden",m(p)&&" dark",m(i).wrapperAttrs?.class)},{...m(i).wrapperAttrs,attrs:void 0,class:void 0},{ref:o}),[A("div",j({id:"root"},{...m(i).attrs,class:void 0,wrapperAttrs:void 0},{class:m(B)(`
			dark:bg-fg
			dark:text-bg
			bg-bg
			text-fg
		`,e.testWrapperMode&&`
			px-10
			pb-10
		`,!e.testWrapperMode&&`
			min-h-dvh
			flex
			flex-col
		`,m(i).attrs?.class)}),[e.testWrapperMode?(k(),S(Z,{key:0,"show-outline":c.value},null,8,["show-outline"])):x("",!0),e.useNotifications&&e.isClientSide?(k(),S(V,{key:1,"data-allow-mismatch":""})):x("",!0),K(n.$slots,"default")],16)],16,re))}});export{be as default};
