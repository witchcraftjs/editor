import{k as G}from"./B39yYSFt.js";import{d as be}from"./Cig2GooE.js";import{p as B,q as E,s as pe,B as X,au as ye,aJ as Z,m as ce,T as we,v as H,c as R,a as P,X as xe,Z as M,a2 as k,E as ze,F as N,G as U,o as $,H as Q,t as ee}from"./ChiTXbtN.js";import{u as _,c as Se}from"./9KPRJcE2.js";import{p as Ce}from"./B834ZAMc.js";import{a as A}from"./9cslYIr4.js";import"./B9Vz3BzZ.js";function L(t,i,e){let s=e.initialDeps??[],n,o=!0;function l(){var r,a,f;let h;e.key&&((r=e.debug)!=null&&r.call(e))&&(h=Date.now());const g=t();if(!(g.length!==s.length||g.some((x,p)=>s[p]!==x)))return n;s=g;let b;if(e.key&&((a=e.debug)!=null&&a.call(e))&&(b=Date.now()),n=i(...g),e.key&&((f=e.debug)!=null&&f.call(e))){const x=Math.round((Date.now()-h)*100)/100,p=Math.round((Date.now()-b)*100)/100,u=p/16,v=(y,I)=>{for(y=String(y);y.length<I;)y=" "+y;return y};console.info(`%câ± ${v(p,5)} /${v(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*u,120))}deg 100% 31%);`,e?.key)}return e?.onChange&&!(o&&e.skipInitialOnChange)&&e.onChange(n),o=!1,n}return l.updateDeps=r=>{s=r},l}function te(t,i){if(t===void 0)throw new Error("Unexpected undefined");return t}const Oe=(t,i)=>Math.abs(t-i)<1.01,Ee=(t,i,e)=>{let s;return function(...n){t.clearTimeout(s),s=t.setTimeout(()=>i.apply(this,n),e)}},se=t=>{const{offsetWidth:i,offsetHeight:e}=t;return{width:i,height:e}},Me=t=>t,We=t=>{const i=Math.max(t.startIndex-t.overscan,0),e=Math.min(t.endIndex+t.overscan,t.count-1),s=[];for(let n=i;n<=e;n++)s.push(n);return s},ke=(t,i)=>{const e=t.scrollElement;if(!e)return;const s=t.targetWindow;if(!s)return;const n=l=>{const{width:r,height:a}=l;i({width:Math.round(r),height:Math.round(a)})};if(n(se(e)),!s.ResizeObserver)return()=>{};const o=new s.ResizeObserver(l=>{const r=()=>{const a=l[0];if(a?.borderBoxSize){const f=a.borderBoxSize[0];if(f){n({width:f.inlineSize,height:f.blockSize});return}}n(se(e))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(r):r()});return o.observe(e,{box:"border-box"}),()=>{o.unobserve(e)}},ne={passive:!0},ie=typeof window>"u"?!0:"onscrollend"in window,Ie=(t,i)=>{const e=t.scrollElement;if(!e)return;const s=t.targetWindow;if(!s)return;let n=0;const o=t.options.useScrollendEvent&&ie?()=>{}:Ee(s,()=>{i(n,!1)},t.options.isScrollingResetDelay),l=h=>()=>{const{horizontal:g,isRtl:d}=t.options;n=g?e.scrollLeft*(d&&-1||1):e.scrollTop,o(),i(n,h)},r=l(!0),a=l(!1);a(),e.addEventListener("scroll",r,ne);const f=t.options.useScrollendEvent&&ie;return f&&e.addEventListener("scrollend",a,ne),()=>{e.removeEventListener("scroll",r),f&&e.removeEventListener("scrollend",a)}},Re=(t,i,e)=>{if(i?.borderBoxSize){const s=i.borderBoxSize[0];if(s)return Math.round(s[e.options.horizontal?"inlineSize":"blockSize"])}return t[e.options.horizontal?"offsetWidth":"offsetHeight"]},$e=(t,{adjustments:i=0,behavior:e},s)=>{var n,o;const l=t+i;(o=(n=s.scrollElement)==null?void 0:n.scrollTo)==null||o.call(n,{[s.options.horizontal?"left":"top"]:l,behavior:e})};class Ae{constructor(i){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let e=null;const s=()=>e||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:e=new this.targetWindow.ResizeObserver(n=>{n.forEach(o=>{const l=()=>{this._measureElement(o.target,o)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var n;(n=s())==null||n.disconnect(),e=null},observe:n=>{var o;return(o=s())==null?void 0:o.observe(n,{box:"border-box"})},unobserve:n=>{var o;return(o=s())==null?void 0:o.unobserve(n)}}})(),this.range=null,this.setOptions=e=>{Object.entries(e).forEach(([s,n])=>{typeof n>"u"&&delete e[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Me,rangeExtractor:We,onChange:()=>{},measureElement:Re,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...e}},this.notify=e=>{var s,n;(n=(s=this.options).onChange)==null||n.call(s,this,e)},this.maybeNotify=L(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),e=>{this.notify(e)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(e=>e()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var e;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((e=this.scrollElement)==null?void 0:e.window)??null,this.elementsCache.forEach(n=>{this.observer.observe(n)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(n,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n,this.isScrolling=o,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(e,s)=>{const n=new Map,o=new Map;for(let l=s-1;l>=0;l--){const r=e[l];if(n.has(r.lane))continue;const a=o.get(r.lane);if(a==null||r.end>a.end?o.set(r.lane,r):r.end<a.end&&n.set(r.lane,!0),n.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((l,r)=>l.end===r.end?l.index-r.index:l.end-r.end)[0]:void 0},this.getMeasurementOptions=L(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(e,s,n,o,l,r)=>(this.prevLanes!==void 0&&this.prevLanes!==r&&(this.lanesChangedFlag=!0),this.prevLanes=r,this.pendingMeasuredCacheIndexes=[],{count:e,paddingStart:s,scrollMargin:n,getItemKey:o,enabled:l,lanes:r}),{key:!1,skipInitialOnChange:!0,onChange:()=>{this.notify(this.isScrolling)}}),this.getMeasurements=L(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:e,paddingStart:s,scrollMargin:n,getItemKey:o,enabled:l,lanes:r},a)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>e)for(const d of this.laneAssignments.keys())d>=e&&this.laneAssignments.delete(d);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const f=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===e&&(this.lanesSettling=!1);const h=this.measurementsCache.slice(0,f),g=new Array(r).fill(void 0);for(let d=0;d<f;d++){const b=h[d];b&&(g[b.lane]=d)}for(let d=f;d<e;d++){const b=o(d),x=this.laneAssignments.get(d);let p,u;if(x!==void 0&&this.options.lanes>1){p=x;const C=g[p],c=C!==void 0?h[C]:void 0;u=c?c.end+this.options.gap:s+n}else{const C=this.options.lanes===1?h[d-1]:this.getFurthestMeasurement(h,d);u=C?C.end+this.options.gap:s+n,p=C?C.lane:d%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(d,p)}const v=a.get(b),y=typeof v=="number"?v:this.options.estimateSize(d),I=u+y;h[d]={index:d,start:u,size:y,end:I,key:b,lane:p},g[p]=d}return this.measurementsCache=h,h},{key:!1,debug:()=>this.options.debug}),this.calculateRange=L(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(e,s,n,o)=>this.range=e.length>0&&s>0?Fe({measurements:e,outerSize:s,scrollOffset:n,lanes:o}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=L(()=>{let e=null,s=null;const n=this.calculateRange();return n&&(e=n.startIndex,s=n.endIndex),this.maybeNotify.updateDeps([this.isScrolling,e,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,e,s]},(e,s,n,o,l)=>o===null||l===null?[]:e({startIndex:o,endIndex:l,overscan:s,count:n}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=e=>{const s=this.options.indexAttribute,n=e.getAttribute(s);return n?parseInt(n,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(e,s)=>{const n=this.indexFromElement(e),o=this.measurementsCache[n];if(!o)return;const l=o.key,r=this.elementsCache.get(l);r!==e&&(r&&this.observer.unobserve(r),this.observer.observe(e),this.elementsCache.set(l,e)),e.isConnected&&this.resizeItem(n,this.options.measureElement(e,s,this))},this.resizeItem=(e,s)=>{const n=this.measurementsCache[e];if(!n)return;const o=this.itemSizeCache.get(n.key)??n.size,l=s-o;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,l,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,s)),this.notify(!1))},this.measureElement=e=>{if(!e){this.elementsCache.forEach((s,n)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(n))});return}this._measureElement(e,void 0)},this.getVirtualItems=L(()=>[this.getVirtualIndexes(),this.getMeasurements()],(e,s)=>{const n=[];for(let o=0,l=e.length;o<l;o++){const r=e[o],a=s[r];n.push(a)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=e=>{const s=this.getMeasurements();if(s.length!==0)return te(s[he(0,s.length-1,n=>te(s[n]).start,e)])},this.getOffsetForAlignment=(e,s,n=0)=>{const o=this.getSize(),l=this.getScrollOffset();s==="auto"&&(s=e>=l+o?"end":"start"),s==="center"?e+=(n-o)/2:s==="end"&&(e-=o);const r=this.getTotalSize()+this.options.scrollMargin-o;return Math.max(Math.min(r,e),0)},this.getOffsetForIndex=(e,s="auto")=>{e=Math.max(0,Math.min(e,this.options.count-1));const n=this.measurementsCache[e];if(!n)return;const o=this.getSize(),l=this.getScrollOffset();if(s==="auto")if(n.end>=l+o-this.options.scrollPaddingEnd)s="end";else if(n.start<=l+this.options.scrollPaddingStart)s="start";else return[l,s];const r=s==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(r,s,n.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(e,{align:s="start",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(e,s),{adjustments:void 0,behavior:n})},this.scrollToIndex=(e,{align:s="auto",behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e=Math.max(0,Math.min(e,this.options.count-1));let o=0;const l=10,r=f=>{if(!this.targetWindow)return;const h=this.getOffsetForIndex(e,f);if(!h){console.warn("Failed to get offset for index:",e);return}const[g,d]=h;this._scrollToOffset(g,{adjustments:void 0,behavior:n}),this.targetWindow.requestAnimationFrame(()=>{const b=this.getScrollOffset(),x=this.getOffsetForIndex(e,d);if(!x){console.warn("Failed to get offset for index:",e);return}Oe(x[0],b)||a(d)})},a=f=>{this.targetWindow&&(o++,o<l?this.targetWindow.requestAnimationFrame(()=>r(f)):console.warn(`Failed to scroll to index ${e} after ${l} attempts.`))};r(s)},this.scrollBy=(e,{behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+e,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var e;const s=this.getMeasurements();let n;if(s.length===0)n=this.options.paddingStart;else if(this.options.lanes===1)n=((e=s[s.length-1])==null?void 0:e.end)??0;else{const o=Array(this.options.lanes).fill(null);let l=s.length-1;for(;l>=0&&o.some(r=>r===null);){const r=s[l];o[r.lane]===null&&(o[r.lane]=r.end),l--}n=Math.max(...o.filter(r=>r!==null))}return Math.max(n-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(e,{adjustments:s,behavior:n})=>{this.options.scrollToFn(e,{behavior:n,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(i)}}const he=(t,i,e,s)=>{for(;t<=i;){const n=(t+i)/2|0,o=e(n);if(o<s)t=n+1;else if(o>s)i=n-1;else return n}return t>0?t-1:0};function Fe({measurements:t,outerSize:i,scrollOffset:e,lanes:s}){const n=t.length-1,o=a=>t[a].start;if(t.length<=s)return{startIndex:0,endIndex:n};let l=he(0,n,o,e),r=l;if(s===1)for(;r<n&&t[r].end<e+i;)r++;else if(s>1){const a=Array(s).fill(0);for(;r<n&&a.some(h=>h<e+i);){const h=t[r];a[h.lane]=h.end,r++}const f=Array(s).fill(e+i);for(;l>=0&&f.some(h=>h>=e);){const h=t[l];f[h.lane]=h.start,l--}l=Math.max(0,l-l%s),r=Math.min(n,r+(s-1-r%s))}return{startIndex:l,endIndex:r}}function Te(t){const i=new Ae(E(t)),e=pe(i),s=i._didMount();return X(()=>E(t).getScrollElement(),n=>{n&&i._willUpdate()},{immediate:!0}),X(()=>E(t),n=>{i.setOptions({...n,onChange:(o,l)=>{var r;Z(e),(r=n.onChange)==null||r.call(n,o,l)}}),i._willUpdate(),Z(e)},{immediate:!0}),ye(s),e}function Le(t){return Te(B(()=>({observeElementRect:ke,observeElementOffset:Ie,scrollToFn:$e,...E(t)})))}function re(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Y(t,...i){for(const e of i){const s=t,n=Ce(G(s),G(e));for(const o of n){const l=s[o],r=e[o];l===void 0?s[o]=r:re(r)&&re(l)?s[o]=Y(l,r):r!==void 0&&(s[o]=r)}}return t}function Be(t,i=0,{queue:e=!1,index:s=e?0:void 0,leading:n=!0,trailing:o=!0}={}){return be(t,i,{queue:e,index:s,leading:n,trailing:o},!0)}class De{observers=new WeakMap;observer;constructor(){this.observers=new WeakMap,this.observer=new ResizeObserver(i=>{for(const e of i){const{target:s,contentRect:n}=e,o=this.observers.get(s);if(o)for(const l of o)l(n,s)}})}observe(i,e){this.observers.get(i)||this.observers.set(i,new Set),this.observer.observe(i),this.observers.get(i).add(e)}unobserve(i,e){if(!this.observers.get(i))return;const n=this.observers.get(i);n.delete(e),n.size===0&&(this.observer.unobserve(i),this.observers.delete(i))}}typeof ResizeObserver>"u"&&console.warn("You are using a directive that uses a ResizeObserver or are importing something that uses this resize observer in a context (e.g. the server) where ResizeObserver does not exist.");const F=typeof ResizeObserver<"u"?new De:{},He=(t,i)=>{let e=!1;t.value&&(e=!0,F.observe(t.value,i)),ce(()=>{X(t,(s,n)=>{t.value?F.observe(t.value,i):n&&F.unobserve(n,i)}),t.value&&!e&&F.observe(t.value,i)}),we(()=>{t.value&&F.unobserve(t.value,i)})},K=F,j=new WeakMap,oe={fitWidth:!0,margin:"dynamic",enabled:!0},V=(t,i)=>{me(i),J(i)},Pe={mounted(t,{value:i={}}){const e=Y({...oe},i);e.enabled&&(ae(t,e),K.observe(t,V))},updated(t,{value:i={}}){const e=Y({...oe},i),s=t&&e.enabled&&W(t,{throwIfMissing:!1}),n=t&&e.enabled&&j.get(t)?.grips,o=s&&s.colCount!==e.colCount;(!e.enabled||o)&&(de(t),K.unobserve(t,V)),(!n&&e.enabled||o)&&(ae(t,e),K.observe(t,V))},unmounted(t){de(t),F.unobserve(t,V)},getSSRProps(){return{}}};function D(t,i,e){const s=W(e),n=Math.max(s.margin,i),o=q(e).findIndex(l=>t===l);s.fitWidth?i<=s.margin?s.widths.value[o]=`${s.margin}px`:s.widths.value[o]=`${n/S(e).width*100}%`:s.widths.value[o]=`${n}px`}function S(t){const i=t.getBoundingClientRect();return{x:Math.round(i.x),width:Math.round(i.width)}}function ue(t){const i=W(t);i.target||_();let e=q(t)[i.grips.get(i.target)];for(e||_();e?.classList.contains("no-resize");)e=e?.previousElementSibling??null;let s=e?.nextElementSibling??null;if(i.fitWidth)for(;s?.classList.contains("no-resize");)s=s?.nextElementSibling??null;return{col:e,colNext:s}}function _e(t){return i=>{const e=W(t);if(!e.isDragging){Se(i.target),e.target=i.target,e.isDragging=!0,t.classList.add("dragging"),i.preventDefault(),document.addEventListener("pointerup",e.pointerUpHandler);const{col:s,colNext:n}=ue(t);if(s===null||n===null&&e.fitWidth)t.classList.add("resizable-cols-error");else{document.addEventListener("pointermove",e.pointerMoveHandler);const o=S(s);o&&(e.offset=i.pageX-(o.x+o.width))}}}}function je(t){return i=>{const e=W(t);if(e.isDragging){i.preventDefault(),e.fluidWidthsAsPercentOfFluidWidth=void 0;const{col:s,colNext:n}=ue(t);if(s!==null){const o=S(s),l=o.width,r=o.x,a=S(n||t),f=a.x+a.width,h=e.margin,g=i.pageX-e.offset;if(e.fitWidth){if(g>r+h&&g<f-h){const d=g-r,b=l-d;if(a.width+b<h){t.classList.add("resizable-cols-error");return}D(s,d,t),D(n,a.width+b,t)}}else if(g>r+h){const d=g-r;D(s,d,t)}J(t)}}}}function le(t){return i=>{const e=W(t);e.pointerMoveHandler(i),e.isDragging&&(i.preventDefault(),e.isDragging=!1,t.classList.remove("dragging"),t.classList.remove("resizable-cols-error"),e.offset=0,delete e.target,document.removeEventListener("pointermove",e.pointerMoveHandler),document.removeEventListener("pointerup",e.pointerUpHandler),document.removeEventListener("pointerleave",e.pointerLeaveHandler))}}function fe(){const t=document.createElement("div");return t.style.position="absolute",t.style.cursor="col-resize",t.style.top="0",t.style.bottom="0",t.classList.add("grip"),t}const qe=t=>{const i=Array.from(t.querySelectorAll(".grip")??[]);for(const e of i)t.removeChild(e)};function Ve(t){const i=fe();t.appendChild(i);const e=S(i).width*3;return t.removeChild(i),e}function W(t,{throwIfMissing:i=!0}={}){const e=j.get(t);return!e&&i&&_("El went missing."),e}function q(t){const i=j.get(t);return i||_("El went missing."),[...t.querySelectorAll(`:scope ${i.selector??"tr > th"}`)]}function ae(t,i){const e=Ve(t),s={grips:new Map,isDragging:!1,pointerDownHandler:_e(t),pointerMoveHandler:je(t),pointerUpHandler:le(t),pointerLeaveHandler:le(t),fitWidth:i.fitWidth,margin:i.margin==="dynamic"?e:i.margin,colCount:i.colCount,widths:i.widths,selector:i.selector,onTeardown:i.onTeardown};j.set(t,s);const n=q(t);if(n.length!==i.colCount)throw new Error(`Number of headers matched using selector ${i.selector??"tr > th"} does not match number of columns.`);me(t,n),t.style.width=s.fitWidth?"":"min-content";const o=i.colCount;for(let l=0;l<o;l++){if(i.fitWidth&&l===o-1)continue;const r=fe();r.addEventListener("pointerdown",s.pointerDownHandler),t.appendChild(r),s.grips.set(r,l)}J(t),t.classList.add("resizable-cols-setup"),i.onSetup?.(t)}function J(t){let i=0;const e=W(t);for(const s of e.grips.keys()){const n=e.grips.get(s),o=q(t)[n];o||_();const l=S(o),r=S(s);s.style.left=`${i+l.width-r.width/2}px`,i+=l.width}}function me(t,i){const e=W(t),s=i??q(t).slice(0,e.colCount),n=e.colCount,o=S(t).width;let l=0;const r={},a=e.fixedWidths===void 0,f=e.fluidWidthsAsPercentOfFluidWidth===void 0;a&&(e.fixedWidths={[-1]:0}),f&&(e.fluidWidthsAsPercentOfFluidWidth={});for(let u=0;u<n;u++){const v=s[u];if(v.classList.contains("no-resize")){if(a){const y=S(v).width;e.fixedWidths[u]=y,e.fixedWidths[-1]+=e.fixedWidths[u]}}else if(f){const y=S(v).width;r[u]=y,l+=y}}const h=n-Object.keys(e.fixedWidths).length;if(f)for(let u=0;u<n;u++)e.fixedWidths[u]===void 0&&(e.fluidWidthsAsPercentOfFluidWidth[u]=r[u]/l);const g=e.fixedWidths[-1],d=h*e.margin,b=d+g;let x=o-g;x<d&&(x=d);let p=0;for(let u=0;u<n;u++){const v=s[u],y=S(v);if(e.fixedWidths[u]!==void 0)e.widths.value[u]=`${e.fixedWidths[u]}px`,p+=e.fixedWidths[u];else if(e.fitWidth){if(!e.widths.value[u]){D(v,y.width,t),p+=S(v).width;continue}const I=e.fluidWidthsAsPercentOfFluidWidth[u]*x;D(v,I,t),p+=S(v).width}else D(v,y.width,t),p+=S(v).width}p<b?t.style.minWidth=`${b}px`:t.style.minWidth=""}function de(t){const i=W(t,{throwIfMissing:!1});if(i){t.removeEventListener("pointerdown",i.pointerDownHandler),document.removeEventListener("pointermove",i.pointerMoveHandler),document.removeEventListener("pointerup",i.pointerUpHandler);for(const e of Object.keys(i))delete i[e];i.onTeardown?.(t),j.delete(t)}t.classList.remove("resizable-cols-setup"),qe(t)}const Ne=["data-index"],Qe=Object.assign({name:"LibTable",inheritAttrs:!1},{__name:"WTable",props:{resizable:{type:Object,required:!1,default:()=>({})},values:{type:Array,required:!1,default:()=>[]},cols:{type:Array,required:!1,default:()=>[]},rounded:{type:Boolean,required:!1,default:!0},border:{type:Boolean,required:!1,default:!0},cellBorder:{type:Boolean,required:!1,default:!0},header:{type:Boolean,required:!1,default:!0},colConfig:{type:Object,required:!1,default:()=>({})},virtualizerOptions:{type:Object,required:!1,default:()=>({})},stickyHeader:{type:Boolean,required:!1},itemKey:{type:[String,Number,Symbol,Function],required:!1,default:""}},setup(t,{expose:i}){const e=t,s=H([]),n=H(!1),o=B(()=>({colCount:e.cols.length,widths:s,selector:e.header?void 0:"tr:first-child > td",...e.resizable,onSetup:c=>{n.value=!0,e.resizable.onSetup&&e.resizable.onSetup(c)},onTeardown:c=>{n.value=!1,e.resizable.onTeardown&&e.resizable.onTeardown(c)}})),l=H(null),r=B(()=>({count:e.values.length,getScrollElement:()=>l.value,estimateSize:()=>33,overscan:e.virtualizerOptions?.overscan??(e.virtualizerOptions?.method==="dynamic"?10:50),method:"fixed",enabled:!1,...e.virtualizerOptions})),a=Le(r),f=B(()=>r.value.enabled?a.value.getVirtualItems():e.values.map((c,z)=>({index:z,size:void 0,start:0,end:0,key:typeof e.itemKey=="function"?e.itemKey(c):e.itemKey?e.values[e.itemKey]:z}))),h=B(()=>a.value.getTotalSize());function g(c){!c||!r.value.enabled||r.value?.method==="dynamic"&&a.value.measureElement(c)}let d=!1;function b(){if(r.value?.method==="dynamic"||!r.value.enabled)return;if(!d)throw new Error("forceRecalculateFixedVirtualizer cannot be called before the table is mounted.");if(!l.value)return;const c=l.value.querySelector("td")?.getBoundingClientRect().height;if(c)for(let z=0;z<e.values.length;z++)a.value.resizeItem(z,c)}const x=H(0);function p(){if(!l.value)return;const c=l.value.querySelector("tbody");c&&x.value!==c.getBoundingClientRect().height&&(x.value=c.getBoundingClientRect().height)}const u=Be(p,100,{leading:!0});ce(()=>{u(),d=!0,setTimeout(()=>{b()},0),He(l,y)});const v=H({vertical:!1,horizontal:!1});function y(){const c=l.value;c&&(v.value={vertical:c.scrollHeight>c.clientHeight,horizontal:c.scrollWidth>c.clientWidth},v.value.vertical&&u())}const I=(c,z,m)=>{const w={bl:!m&&c===e.values.length-1&&z===0,br:!m&&c===e.values.length-1&&z===e.cols.length-1,tr:(m||!e.header)&&c===0&&z===e.cols.length-1,tl:(m||!e.header)&&c===0&&z===0,"first-row":(m||!e.header)&&c===0,"last-row":c===e.values.length-1,"first-col":z===0,"last-col":z===e.cols.length-1};return G(w).filter(O=>w[O])},C=B(()=>{const c={},z="table--header-cell cell truncate",m="table--cell cell truncate";for(let w=-1;w<e.values.length+1;w++)for(let O=0;O<e.cols.length;O++){const T=e.cols[O],ge=e.colConfig[T],ve=`${w}-${O}`;c[ve]=A(I(w,O,w===-1).join(" "),w===-1?z:m,w===-1?ge?.resizable===!1&&"no-resize":void 0,w!==-1&&r.value.enabled&&r.value.method==="dynamic"&&"flex")}return c});return i({forceRecalculateFixedVirtualizer:b}),(c,z)=>($(),R("div",{class:M(E(A)(`
		table--container
		overflow-auto
	`,v.value.vertical&&"has-scrollbar-vertical",v.value.horizontal&&"has-scrollbar-horizontal",t.stickyHeader&&`
		[&_thead]:sticky
		[&_thead]:top-0
		[&_thead]:z-1
		[&_.grip]:z-2
	`,n.value&&"resizable-cols-setup",t.border&&`
		border
		border-neutral-500
	`,t.border&&t.cellBorder&&`
		[&.has-scrollbar-horizontal_.last-row]:border-b
		[&.has-scrollbar-horizontal_.last-row]:border-neutral-500
		[&.has-scrollbar-vertical_.last-col]:border-r
		[&.has-scrollbar-vertical_.last-col]:border-neutral-500
	`,(!o.value.fitWidth||t.stickyHeader)&&`
		[&_td.tr]:rounded-tr-none!
		[&_td.br]:rounded-br-none!
	`,o.value.fitWidth===!1&&`
		[&_.grip]:last:translate-x-[-5px]
		mr-1
		max-w-fit
	`,t.rounded&&`
		rounded-md
	`,r.value.enabled&&r.value.method==="dynamic"&&`
		relative
		`,c.$attrs["wrapper-class"])),ref_key:"parentRef",ref:l},[P("div",{class:"table--inner-container",style:k({...r.value.enabled?{height:`${h.value}px`}:{}})},[xe(($(),R("table",{style:k({...t.stickyHeader&&r.value.enabled?{"--table-sticky-fix":`${h.value-x.value}px`}:{},...c.$attrs.style??{}}),class:M(E(A)(`
				table
				table-fixed
				border-separate
				border-spacing-0
				scrollbar-hidden
				[&_.grip]:w-[5px]
				relative
				w-full
				box-content
				[&_thead]:font-bold
				[&_td]:p-1
				[&_th]:p-1
				[&.resizable-cols-error]:cursor-not-allowed
				[&.resizable-cols-error]:user-select-none
				[&_thead_th]:bg-neutral-200
				dark:[&_thead_th]:bg-neutral-800
			`,n.value&&r.value.enabled&&r.value.method==="dynamic"&&`
				grid
			`,t.stickyHeader&&r.value.enabled&&r.value.method==="fixed"&&`
				after:inline-block
				after:h-(--table-sticky-fix)
			`,t.cellBorder&&`
				[&_td]:border-neutral-500
				[&_td:not(.last-row)]:border-b
				[&_td:not(.first-col)]:border-l
				[&_th]:border-neutral-500
				[&_th:not(.last-row)]:border-b
				[&_th:not(.first-col)]:border-l
			`,!t.cellBorder&&`
				[&_.grip]:hover:bg-neutral-300
				dark:[&_.grip]:hover:bg-neutral-700
			`,c.$attrs.class))},[t.header?($(),R("thead",{key:0,class:M(E(A)("table--header",n.value&&r.value.enabled&&r.value.method==="dynamic"&&`
						grid
						top-0
					`))},[P("tr",{class:M(E(A)("table--row",n.value&&r.value.enabled&&r.value.method==="dynamic"&&"flex w-full"))},[($(!0),R(N,null,U(t.cols,(m,w)=>Q(c.$slots,`header-${m.toString()}`,{key:m,class:M(C.value[`-1-${w}`]),style:k({width:s.value[w]}),colKey:m,config:t.colConfig[m]},()=>[P("th",{class:M(C.value[`-1-${w}`]),style:k({width:s.value[w]})},ee(t.colConfig[m]?.name??m),7)])),128))],2)],2)):ze("",!0),P("tbody",{class:M(E(A)("table--body",n.value&&r.value.enabled&&r.value.method==="dynamic"&&`
						grid
						relative
					`)),style:k({...r.value.enabled&&r.value.method==="dynamic"?{height:`${h.value}px`}:{}})},[($(!0),R(N,null,U(f.value,(m,w)=>($(),R("tr",{key:m.key,class:M(E(A)(`
								table--row
							`,n.value&&r.value.enabled&&r.value.method==="dynamic"&&`
								flex
								absolute
								w-full
							`,n.value&&r.value.enabled&&" will-change-transform ")),style:k({...r.value.enabled?{transform:r.value.method==="fixed"?`translateY(${m.start-w*m.size}px)`:`translateY(${m.start}px)`,height:`${m.size}px`}:{}}),"data-index":m.index,ref_for:!0,ref:g},[($(!0),R(N,null,U(t.cols,(O,T)=>Q(c.$slots,O,{key:m.key+"-"+O.toString(),item:t.values[m.index],value:t.values[m.index][O],style:k({width:s.value[T]}),class:M(C.value[`${m.index}-${T}`])},()=>[P("td",{style:k({width:s.value[T]}),class:M(C.value[`${m.index}-${T}`])},ee(t.values[m.index][O]),7)])),128))],14,Ne))),128))],6)],6)),[[E(Pe),o.value]])],4)],2))}});export{Qe as default};
