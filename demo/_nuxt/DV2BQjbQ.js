import{c as q,u as X}from"./9KPRJcE2.js";import{v as p,B as T,m as P,T as z,p as _,J as Y,x as m,i as ee,$ as te,aa as j,c as se,a as oe,C as R,E as W,H as ne,D as H,q as k,o as L}from"./ChiTXbtN.js";import{u as ie}from"./CxzPWhlJ.js";import{u as ae,_ as re}from"./BZHi8VbL.js";import{i as le,m as ce,d as ue,a as de,b as Z,c as fe,l as he,t as pe}from"./Bk2TiR2_.js";import{N as me}from"./DzI26sm5.js";import{C as w}from"./475SGCPX.js";import{i as ve}from"./BhoX2VZY.js";import{k as F}from"./B39yYSFt.js";import{a as J}from"./9cslYIr4.js";import ye from"./D8E5hQfn.js";import"./ITpQabsi.js";import"./CHz82bDi.js";import"./CRo8hmbH.js";import"./B6qcY32u.js";import"./CD0Jx8XC.js";import"./66w8nu5J.js";import"./Du8JU2h8.js";import"./DB0SWIft.js";import"./sEuE6jyJ.js";import"./0nEvwRti.js";function ke(o,e=p(!0)){const t=p(!1),s=p(!1),n=u=>{s.value=!0,setTimeout(()=>{s.value=!1},0)},i=u=>{s.value=!1,t.value=!1},a=u=>{s.value&&e.value&&(t.value=!0)};let r=!1;const c=()=>{r&&(q(o.value),o.value&&(o.value.addEventListener("focusin",a),o.value.addEventListener("keydown",n),o.value.addEventListener("mousedown",i)))},d=()=>{o.value&&(q(o.value),o.value.removeEventListener("focusin",a),o.value.removeEventListener("keydown",n),o.value.removeEventListener("mousedown",i))};return T(e,(u,f)=>{u!==f&&(u?c():(t.value=!1,d()))}),P(()=>{r=!0,e.value&&c()}),z(()=>{r=!1,d()}),{outline:t,control:e}}const U="prefersColorSchemeDark",ge=["system","dark","light"],we=({useLocalStorage:o=!0,darkModeOrder:e=ge,isClientSide:t=!0,useViewTransition:s=!0}={})=>{const n=p(!1),i=p(void 0);o&&t&&T(i,()=>{localStorage.setItem(U,i.value?"true":"false")});const a=_(()=>i.value??n.value),r=_(()=>i.value===void 0?"system":i.value?"dark":"light");function c(l){i.value=l==="dark"?!0:l==="light"?!1:void 0}function d(){const l=e.indexOf(r.value);return l===2?e[0]:e[l+1]}function u(){c(d())}function f(){if(!s){u();return}const l=d(),h=e.indexOf(r.value),v=n.value?"dark":"light";if(l==="system"&&v===e[h]){u();return}document.startViewTransition||u(),document.startViewTransition(async()=>{u(),await Y()})}return P(()=>{if(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:l})=>{l?n.value=!0:n.value=!1}),o!==!1){const l=typeof o=="string"?o:U,h=localStorage.getItem(l);h==="true"?i.value=!0:h==="false"&&(i.value=!1)}}),m(le,a),m(ce,i),m(ue,{darkMode:a,darkModeState:r,manualDarkMode:i,systemDarkMode:n}),m(de,{setDarkMode:c,cycleDarkMode:f}),{darkMode:a,darkModeState:r,setDarkMode:c,cycleDarkMode:f,manualDarkMode:i,systemDarkMode:n}};function be(...o){return we(...o)}function xe(o,e){const t=ee(Z);if(t===void 0)throw new Error("witchcraft/ui: The default translation function requires the useSetupI18n `useBuiltinTranslations` options to be true. Did you set it?");let s=t.value["witchcraft-ui"][o];if(s===void 0)throw new Error(`No translation for key ${o}.`);if(e!==void 0)for(const[n,i]of Object.entries(e))s=s.replaceAll(`{${n}}`,i);return s}const Se=Object.assign({"../assets/locales/en.json":()=>te(()=>import("./DGaVfKcn.js"),[],import.meta.url)}),N={},_e=new Proxy({},{get(){return"..."}}),Me=new Proxy({},{get(o,e){if(e==="witchcraft-ui")return _e}});async function $e({locale:o,useBuiltinTranslations:e=!1,useDummyMessageSetWhileLoading:t=!0,translationFunction:s=xe}){if(m(fe,s),e){const n=p(t?Me:{});m(Z,n);async function i(a){if(N[a])n.value=N[a];else{const c=(await Se[`../assets/locales/${a}.json`]()).default;N[a]=c,n.value=c}}i(o.value),T(o,async()=>{i(o.value)})}}function Ce(){const o=p("en"),e=p("en-GB");function t(n){o.value=n}function s(n){e.value=n}return m(he,o),m(pe,e),{languageLocale:o,timeLocale:e,setLanguageLocale:t,setTimeLocale:s}}var b={neutral:{50:"oklch(98.5% 0 0)",100:"oklch(97% 0 0)",200:"oklch(92.2% 0 0)",300:"oklch(87% 0 0)",400:"oklch(70.8% 0 0)",500:"oklch(55.6% 0 0)",600:"oklch(43.9% 0 0)",700:"oklch(37.1% 0 0)",800:"oklch(26.9% 0 0)",900:"oklch(20.5% 0 0)",950:"oklch(14.5% 0 0)"},red:{50:"oklch(97.1% 0.013 17.38)",100:"oklch(93.6% 0.032 17.717)",200:"oklch(88.5% 0.062 18.334)",300:"oklch(80.8% 0.114 19.571)",400:"oklch(70.4% 0.191 22.216)",500:"oklch(63.7% 0.237 25.331)",600:"oklch(57.7% 0.245 27.325)",700:"oklch(50.5% 0.213 27.518)",800:"oklch(44.4% 0.177 26.899)",900:"oklch(39.6% 0.141 25.723)",950:"oklch(25.8% 0.092 26.042)"},yellow:{50:"oklch(98.7% 0.026 102.212)",100:"oklch(97.3% 0.071 103.193)",200:"oklch(94.5% 0.129 101.54)",300:"oklch(90.5% 0.182 98.111)",400:"oklch(85.2% 0.199 91.936)",500:"oklch(79.5% 0.184 86.047)",600:"oklch(68.1% 0.162 75.834)",700:"oklch(55.4% 0.135 66.442)",800:"oklch(47.6% 0.114 61.907)",900:"oklch(42.1% 0.095 57.708)",950:"oklch(28.6% 0.066 53.813)"},green:{50:"oklch(98.2% 0.018 155.826)",100:"oklch(96.2% 0.044 156.743)",200:"oklch(92.5% 0.084 155.995)",300:"oklch(87.1% 0.15 154.449)",400:"oklch(79.2% 0.209 151.711)",500:"oklch(72.3% 0.219 149.579)",600:"oklch(62.7% 0.194 149.214)",700:"oklch(52.7% 0.154 150.069)",800:"oklch(44.8% 0.119 151.328)",900:"oklch(39.3% 0.095 152.535)",950:"oklch(26.6% 0.065 152.934)"},blue:{50:"oklch(97% 0.014 254.604)",100:"oklch(93.2% 0.032 255.585)",200:"oklch(88.2% 0.059 254.128)",300:"oklch(80.9% 0.105 251.813)",400:"oklch(70.7% 0.165 254.624)",500:"oklch(62.3% 0.214 259.815)",600:"oklch(54.6% 0.245 262.881)",700:"oklch(48.8% 0.243 264.376)",800:"oklch(42.4% 0.199 265.638)",900:"oklch(37.9% 0.146 265.522)",950:"oklch(28.2% 0.091 267.935)"}};class B{_dependants=[];addDep(e){this._dependants.push(e)}removeDep(e){const t=this._dependants.indexOf(e);t>=0&&this._dependants.slice(t,1)}_notify(){for(const e of this._dependants)e.notify(this)}notify(...e){throw new Error("Extending class must implement.")}}class C extends B{unit;value;css="";constructor(e,t){super(),this.unit=e,this.set(t)}set(e){this.value=["number","string","boolean"].includes(typeof e)?{_:e}:e,this.notify()}notify(){this.recompute(),this._notify()}recompute(){this.css=this.unit(this.value)}}const Ee=o=>Array.isArray(o)?o.length:o,Ie=({i:o,name:e})=>`${e}-${o}`,Oe=({i:o,name:e,separator:t})=>`${e}${t}${["50","100","200","300","400","500","600","700","800","900","950"][o]}`,De=(o,e)=>typeof e=="number"&&o!==!1&&o>-1?+e.toFixed(o):e,je=({start:o,end:e,percent:t})=>o+(e-o)*t,Le=(o=je)=>e=>{const{start:t,end:s,exclude:n,roundTo:i}=e,a={};for(const r of Object.keys(t.value)){if(n.includes(r)){a[r]=t.value[r];continue}a[r]=t.value[r];const c=t.value[r],d=s.value[r];if(typeof c=="number"&&typeof d=="number"){const u=o({...e,start:c,end:d});if(typeof u=="number"&&isNaN(u))throw new Error(`Interpolation for key ${r} from ${c} to ${d} resulted in ${u}.`);a[r]=De(i,u)}}return a},Ne=Le(),S=(o,e)=>o.replace(/[^a-zA-Z0-9_-]/g,e),G=(o,e,t)=>{let s=o-e,n=t-e;return s<0&&(s=0),n===0&&(s=1,n=1),s/n};class Q extends B{name;unit;values;ready=!1;value=[];interpolated={};options={roundTo:3,exclude:[],keyLimit:10,keyName:Ie,interpolator:Ne,separator:"-",steps:10};constructor(e,t,s,n={}){if(super(),ve(e))throw new Error("Name cannot be blank.");this.name=e,this.unit=t,this.set(s),this.setOpts(n),this.ready=!0,this.notify()}setOpts(e){this.options={...this.options,...e},this.ready&&this.notify()}set(e){const t=Array.isArray(e[0]);if(this.ready)for(const s of this.values)(t?s[1]:s)?.removeDep(this);if(t&&e.find(s=>s[0]>1)!==void 0)throw new Error("Stop Entry percentage must be expressed in a value from 0 to 1.");this.values=t?[...e].sort((s,n)=>s[0]-n[0]):e;for(const s of this.values)(t?s[1]:s).addDep(this);this.ready&&this.notify()}notify(){this.recompute(),this._notify()}recompute(){const e=[],t={},s=this.options.steps,n=Ee(s),{values:i,name:a}=this,r=Array.isArray(i[0]),c=i.length-1,d=c===0?0:1/c,u={};let f=-1,l=-1,h=-1,v=-1;for(let g=0;g<n;g++){let y=Array.isArray(s)?s[g]:g/(s-1),I,O;if(r){for(;(f<0||v<y)&&f<i.length-1;)f++,h=i[f][0],l=Math.min(f+1,c),v=i[l][0];I=i[f][1],O=i[l][1],y=G(y,h,v)}else{const D=Math.floor(y*c),K=Math.min(D+1,c);h=D*d,v=K*d,y=G(y,h,v),I=i[D],O=i[K]}const A=this.options.keyName({i:g,steps:s,totalSteps:n,name:this.name,keyLimit:this.options.keyLimit,separator:this.options.separator}),V=this.options.interpolator({start:I,end:O,name:a,percent:y,state:u,step:g,keyName:A,totalSteps:n,steps:s,exclude:this.options.exclude,roundTo:this.options.roundTo});e.push(V),t[A]=this.unit(V)}this.value=e,this.interpolated=t}}class M extends B{ready=!1;els=[];css={};value={};options={escapeChar:"-"};_listeners={change:[]};constructor(e,t={}){super(),this.add(e),this.setOpts(t),this.recompute(!1),this.ready=!0}setOpts(e={}){this.options={...this.options,...e},this.ready&&this.notify()}add(e){for(const t of F(e))this._add(t,e[t])}_add(e,t){if(this.value[e])throw new Error(`Key ${e} already exists in theme. Use set to change the value.`);this.ready&&this.value[e]?.removeDep(this),this.value[e]=t,t.addDep(this),this.ready&&this.notify()}remove(e){if(!this.value[e])return;this.ready&&this.value[e]?.removeDep(this);const t=this.value[e];this._generateCss(this.css,e,this.options.escapeChar,t,{remove:!0}),delete this.value[e],this.ready&&this.notify()}set(e,t){this.ready&&this.value[e]?.removeDep(this),this.value[e]=t,this._generateCss(this.css,e,this.options.escapeChar,t),t.addDep(this),this.ready&&this.notify({recompute:!1})}notify({recompute:e=!0}={}){if(this.ready){e&&this.recompute(!1);for(const t of this._listeners.change)t();for(const t of this.els)this._lastPropertiesSet=M.setElVariables(t,this.css,this._lastPropertiesSet)}}on(e,t){this._listeners[e].push(t)}off(e,t){const s=this._listeners[e].findIndex(t);s>-1&&this._listeners[e].splice(s,1)}_generateCss(e,t,s,n,{remove:i=!1}={}){if(n instanceof Q)for(const a of Object.keys(n.interpolated))i?delete e[`--${S(a,s)}`]:e[`--${S(a,s)}`]=n.interpolated[a];else i?delete e[`--${S(t,s)}`]:e[`--${S(t,s)}`]=n.css}recompute(e=!0){const t={};for(const[s,n]of Object.entries(this.value))e&&n.recompute(),this._generateCss(t,s,this.options.escapeChar,n);this.css=t}_lastPropertiesSet=[];static setElVariables(e,t,s=[]){for(const i of s)e.style.removeProperty(i);const n=[];for(const i of F(t))e.style.setProperty(i,t[i]),n.push(i);return n}attach(e=document.documentElement){this.els.push(e),this._lastPropertiesSet=M.setElVariables(e,this.css,this._lastPropertiesSet)}detach(e=document.documentElement){const t=this.els.indexOf(e);if(t>=0){this.els.splice(t,1);for(const s of this._lastPropertiesSet)e.style.removeProperty(s)}else console.warn("Was not attached to element:",e)}}const Te=({l:o,c:e,h:t,a:s})=>`lch(${o} ${e} ${t}${s!==void 0?` / ${s}`:""})`,$=o=>`ok${Te(o)}`,Pe=o=>({_:e})=>`${e}${o}`,Be=Pe("rem");function E(o){const e=o.oklch;return{l:e.l??0,c:e.c??0,h:e.h??0}}const Ae=o=>({percent:e,state:t,start:s,end:n})=>{const i=s.css+n.css;if(t.key!==i){const r=new w(s.css),c=new w(n.css);t.range=r.range(c,{space:o}),t.key=i}const a=t.range(e);return E(a)},Ve=Ae(),Ke=new C(Be,{_:.25}),qe={interpolator:Ve,keyName:Oe,steps:11},x=(o,e,t={})=>{const s=[];for(const n of e){const i=new w(n),a=new C($,E(i));s.push(a)}return new Q(o,$,s,{...qe,...t})},Re=x("color-neutral",[...Object.values(b.neutral)]),We=x("color-ok",[...Object.values(b.green)]),He=x("color-warning",[...Object.values(b.yellow)]),Fe=x("color-danger",[...Object.values(b.red)]),Je=x("color-accent",[...Object.values(b.blue)]),Ue=new C($,E(new w("rgb(99% 99% 99%)"))),Ge=new C($,E(new w("rgb(1% 1% 1%)"))),ze=new M({"number-spacing":Ke,bg:Re,"color-bg":Ue,"color-fg":Ge,ok:We,warning:He,danger:Fe,accent:Je}),Ze=ze,Qe=["id"],gt=Object.assign({name:"Root",inheritAttrs:!1,suspensible:!1},{__name:"WRoot",props:{theme:{type:Object,required:!1,default:void 0},outline:{type:Boolean,required:!1,default:!0},forceOutline:{type:Boolean,required:!1,default:!1},testWrapperMode:{type:Boolean,required:!1,default:!1},id:{type:String,required:!1,default:"app"},getRef:{type:Function,required:!1,default:void 0},isClientSide:{type:Boolean,required:!1,default:!0},useBuiltinTranslations:{type:Boolean,required:!1,default:!0},useNotifications:{type:Boolean,required:!1,default:!0},notificationHandler:{type:Object,required:!1,default:void 0}},setup(o,{expose:e}){const t=ie(["wrapper"]),s=o,n=p(null);function i(l){l!==null&&!(l instanceof HTMLElement)&&X(),n.value=l,s.getRef?.(l)}if(s.useNotifications){const l=s.notificationHandler??new me;ae(l,s.isClientSide)}const a=ke(n).outline,r=_(()=>s.outline&&a.value||s.forceOutline),c=_(()=>s.theme??Ze),d=()=>{j(c.value).attach(n.value)};s.isClientSide&&(P(()=>{j(c.value).on("change",d),d()}),z(()=>{j(c.value).off("change",d)}));const u=be({isClientSide:s.isClientSide}),f=u.darkMode;if(e({darkMode:u}),s.useBuiltinTranslations){const{languageLocale:l}=Ce();$e({locale:l,useBuiltinTranslations:!0,useDummyMessageSetWhileLoading:!0})}return(l,h)=>(L(),se("div",H({id:o.id,tabindex:"-1",class:k(J)(r.value?"group outlined outlined-visible":"[&_*]:outline-hidden",k(f)&&" dark",k(t).wrapperAttrs?.class)},{...k(t).wrapperAttrs,attrs:void 0,class:void 0},{ref:i}),[oe("div",H({id:"root"},{...k(t).attrs,class:void 0,wrapperAttrs:void 0},{class:k(J)(`
			dark:bg-fg
			dark:text-bg
			bg-bg
			text-fg
		`,o.testWrapperMode&&`
			px-10
			pb-10
		`,!o.testWrapperMode&&`
			min-h-dvh
			flex
			flex-col
		`,k(t).attrs?.class)}),[o.testWrapperMode?(L(),R(ye,{key:0,"show-outline":r.value},null,8,["show-outline"])):W("",!0),o.useNotifications&&o.isClientSide?(L(),R(re,{key:1,"data-allow-mismatch":""})):W("",!0),ne(l.$slots,"default")],16)],16,Qe))}});export{gt as default};
